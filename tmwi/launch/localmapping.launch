<launch>

    <!-- PARAMETERS -->

    <!-- General settings -->
    <arg name ="2D_Mapping"                         default="false" />  
    <arg name="default_zoom"                       default="8" />

    <!-- Visualisation -->
    <arg name="use_rviz"                            default="true" />
    <arg name="use_rtabmapviz"                      default="false" />
    <arg name="localization"                        default="false" />
    <arg name="rviz_cfg"                            default="$(find tmwi)/launch/config/rgbd.rviz" />



    <!-- REALSENSES-->

    <!-- Front cam for RTABMAP -->
    <include file="$(find realsense2_camera)/launch/rs_camera.launch">
        <arg name="align_depth"                     value="true"/>
        <arg name="camera"                          value="camera"/>
        <arg name="serial_no"                       value="030522070002"/>
        <arg name="filters"                         value="spatial,temporal,pointcloud"/>
    </include>

    <!-- Film screen -->
    <include file="$(find realsense2_camera)/launch/rs_camera.launch">
        <arg name="camera"                          value="camera_screen"/>
        <arg name="serial_no"                       value="034522061023"/>
        <arg name="filters"                         value="spatial,temporal"/>
        <arg name="publish_tf"                      value="false"/>
        <arg name="publish_odom_tf"                 value="false"/>
        <arg name="enable_depth"                    value="false"/>
    </include>



    <!-- ROBOT STATE PUBLISHER -->
    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find tmwi_description)/urdf/testsetup_stroller.urdf.xacro' use_nominal_extrinsics:=false"/>
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>



    <!-- RTABMAP -->
    <include file="$(find rtabmap_ros)/launch/rtabmap.launch">
        <arg name="rtabmap_args"       value=""/>         <!-- "\-\-delete_db_on_start" -->
        <arg name="depth_topic"        value="/camera/aligned_depth_to_color/image_raw"/>
        <arg name="frame_id"           value="/base_link"/>
        <arg name="rgb_topic"          value="/camera/color/image_raw"/>
        <arg name="camera_info_topic"  value="/camera/color/camera_info"/>
        <arg name="rviz"               value="$(arg use_rviz)"/>
        <arg name="rtabmap_viz"         value="$(arg use_rtabmapviz)"/>
        <arg name="rviz_cfg"           value="$(arg rviz_cfg)" />
        <arg name="gen_cloud_voxel"    value="0.25"/>
        <arg name="scan_cloud_assembling_noise_radius" value=".1" />
        <arg name="scan_cloud_assembling_noise_min_neighbors" value="8000" />
        <!-- <arg name="gen_depth_fill_holes_size" value="1000" /> -->
        <!-- <arg name="localization"     value=$(arg localization) /> -->
    </include>
    


    <!-- TACTILE MAP WITH INTENT -->
    <node name="tmwi_node" pkg="tmwi" type="tmwi_node" output="screen">
        <param name="zoom_level" value="$(arg default_zoom)" />
    </node>

</launch>